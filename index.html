<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>

<title>Mandelbrot</title>

<meta name="description" content="A Mandelbrot fractal im GLSL just for fun."/>
<meta name="author" content="Mathias PanzenbÃ¶ck"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="A Mandelbrot fractal im GLSL just for fun."/>
<meta name="twitter:image" content="https://panzi.github.io/webgl-mandelbrot/mandelbrot.jpg"/>

<meta property="og:title" content="A Mandelbrot fractal im GLSL just for fun." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://panzi.github.io/webgl-mandelbrot/" />
<meta property="og:image" content="https://panzi.github.io/webgl-mandelbrot/mandelbrot.jpg" />
<meta property="og:image:width" content="960"/>
<meta property="og:image:height" content="540"/>

<meta name="theme-color" content="#0201f7" />

<link rel="stylesheet" href="style.css" />
</head>
<body ondragstart="return false;" ondrop="return false;">
<canvas id="canvas"></canvas>
<div id="fps" class="message hidden">X fps</div>
<ol id="messages" class="message"></ol>
<div id="help" class="message hidden"
  onmousedown="event.stopPropagation();"
  ontouchstart="event.stopPropagation();"
  onwheel="event.stopPropagation();"
  onclick="event.stopPropagation();"
  ondblclick="event.stopPropagation();"
  onkeydown="
    if (event.key === 'Escape') {
      this.classList.add('hidden');
    }
    event.stopPropagation();
  "
>

  <h3>Settings</h3>

  <form action="javascript:;" onsubmit="
    event.preventDefault();
    helpEl.classList.add('hidden');
  ">
    <table>
      <tbody>
        <tr>
          <td><label for="fractal-input">Fractal</label></td>
          <td>
            <span class="select-wrapper">
              <select id="fractal-input" onchange="
                fractal = this.value;
                updateShader();
                redraw();
                setUrlParams();
              ">
                <option value="mandelbrot">Mandelbrot</option>
                <option value="julia">Julia</option>
              </select>
            </span>
          </td>
        </tr>
        <tr>
          <td><label for="iterations-input">Iterations</label></td>
          <td>
            <input type="number" min="1" max="10000" value="100" id="iterations-input"
              oninput="debouncedSetIterations(+this.value)"
              onchange="setIterations(+this.value)" />
          </td>
        </tr>
        <tr>
          <td><label for="threshold-input">Threshold</label></td>
          <td>
            <input type="number" min="1" max="10000" value="100" id="threshold-input"
              oninput="debouncedSetThreshold(+this.value);"
              onchange="setThreshold(+this.value);" />
          </td>
        </tr>
        <tr>
          <td><label for="fps-input">Animation frames per second</label></td>
          <td>
            <input type="number" min="1" max="120" value="12" id="fps-input"
              oninput="animationFPS = +this.value; debouncedSetUrlParams();"
              onchange="animationFPS = +this.value; setUrlParams();"
            />
          </td>
        </tr>
        <tr>
          <td><label for="colorspace-input">Color-Space</label></td>
          <td>
            <span class="select-wrapper">
              <select id="colorspace-input" onchange="
                gl.drawingBufferColorSpace = this.value;
                redraw();
                setUrlParams();
              ">
                <option value="srgb">sRGB</option>
                <option value="display-p3">Display-P3</option>
              </select>
            </span>
          </td>
        </tr>
        <tr id="color-code-preset-row">
          <td>
            <label for="color-code-preset">Colors</label>
          </td>
          <td>
            <span class="select-wrapper">
              <select id="color-code-preset" onchange="
                if (this.value === 'custom') {
                  document.getElementById('custom-color-code-row').classList.remove('hidden');
                  document.getElementById('derive-custom-color-code-row').classList.add('hidden');
                  setColorCode(document.getElementById('color-code').value);
                } else {
                  document.getElementById('custom-color-code-row').classList.add('hidden');
                  document.getElementById('derive-custom-color-code-row').classList.remove('hidden');
                  setColorCode(COLOR_CODES[this.value]);
                  colors = this.value;
                  setUrlParams();
                }
              ">
                <optgroup label="Rainbow">
                  <option value="BGR" selected>BGR</option>
                  <option value="GRB">GRB</option>
                  <option value="RBG">RBG</option>
                  <option value="GBR">GBR</option>
                  <option value="BRG">BRG</option>
                  <option value="RGB">RGB</option>
                </optgroup>
                <optgroup label="Grayscale">
                  <option value="grayscaleBB">Black Background</option>
                  <option value="grayscaleWB">White Background</option>
                </optgroup>
                <optgroup label="Horizon" title="These are slow.">
                  <option value="horizonS">Horizon (sRGB)</option>
                  <option value="horizonC">Horizon (color corrected)</option>
                  <option value="horizonL">Horizon (wrong color space)</option>
                </optgroup>
                <option value="sepia">Sepia</option>
                <optgroup label="Pride">
                  <optgroup label="Flags">
                    <option value="gay">Gay Pride</option>
                    <option value="trans">Trans Pride</option>
                    <option value="bi">Bi Pride</option>
                    <option value="pan">Pan Pride</option>
                    <option value="nb">Non-Binary Pride</option>
                  </optgroup>
                  <optgroup label="Gradients">
                    <option value="gayGrad">Gay Pride (Gradient)</option>
                    <option value="transGrad">Trans Pride (Gradient)</option>
                    <option value="biGrad">Bi Pride (Gradient)</option>
                    <option value="panGrad">Pan Pride (Gradient)</option>
                    <option value="nbGrad">Non-Binary Pride (Gradient)</option>
                  </optgroup>
                </optgroup>
                <option value="custom">Custom</option>
              </select>
            </span>
          </td>
        </tr>
        <tr id="derive-custom-color-code-row">
          <td colspan="2">
            <button type="button" class="right" onclick="
              document.getElementById('color-code').value = colorCode;
              document.getElementById('color-code-preset').value = 'custom';
              document.getElementById('custom-color-code-row').style.display = '';
              document.getElementById('derive-custom-color-code-row').style.display = 'none';
            ">Derive custom colors from current colors</button>
          </td>
        </tr>
        <tr id="custom-color-code-row" class="hidden">
          <td colspan="2">
            <textarea class="fullsize" id="color-code"
              oninput="debouncedSetColorCode(this.value);"
              onchange="setColorCode(this.value);"
            ></textarea>
          </td>
        </tr>
      </tbody>
    </table>
  </form>

  <h3>Hotkeys</h3>
  <table>
    <tbody>
      <!-- left &#x1F838; -->
      <!-- right &#x1F83A; -->
      <!-- up &#x1F839; -->
      <!-- down &#x1F83B; -->
      <tr>
        <td class="hotkey"><kbd>H</kbd></td>
        <td>Toggle help messge</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>M</kbd></td>
        <td>Show Mandelbrot set</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>J</kbd></td>
        <td>Show Julia set</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>+</kbd>, <kbd>Wheel &#x1F839;</kbd></td>
        <td>Zoom In</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>-</kbd>, <kbd>Wheel &#x1F83B;</kbd></td>
        <td>Zoom Out</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>&#x1F838;</kbd>, <kbd>&#x1F839;</kbd>, <kbd>&#x1F83B;</kbd>, <kbd>&#x1F838;</kbd>, <kbd>Panning</kbd></td>
        <td>Navigate</td>
      </tr>
      <tr>
        <td class="hotkey">
          [<kbd>Shift</kbd>+]<kbd>Ctrl</kbd>+<kbd>&#x1F838;</kbd>,<br/>
          [<kbd>Shift</kbd>+]<kbd>Ctrl</kbd>+<kbd>&#x1F83A;</kbd>,<br/>
          [<kbd>Shift</kbd>+]<kbd>Ctrl</kbd>+<kbd>&#x1F839;</kbd>,<br/>
          [<kbd>Shift</kbd>+]<kbd>Ctrl</kbd>+<kbd>&#x1F83B;</kbd>,<br/>
          <kbd>Ctrl</kbd>/<kbd>Alt</kbd>+<kbd>Wheel &#x1F839;</kbd>,<br/>
          <kbd>Ctrl</kbd>/<kbd>Alt</kbd>+<kbd>Wheel &#x1F83B;</kbd>,<br/>
          [<kbd>Shift</kbd>+]<kbd>Ctrl</kbd>+<kbd>Panning</kbd>,<br/>
          <kbd>&GreaterEqual; 3 Finger Panning</kbd>
        </td>
        <td>
          Navigate the complex parameter for the Julia set.
          <kbd>Shift</kbd> for smaller steps.
          <kbd>Ctrl</kbd>/<kbd>&#x1F838;</kbd>/<kbd>&#x1F83A;</kbd> for the real component,
          <kbd>Alt</kbd>/<kbd>&#x1F839;</kbd>/<kbd>&#x1F83B;</kbd> for the complex component.
        </td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>F</kbd>, <kbd>Double Click</kbd>, <kbd>Double Tap</kbd></td>
        <td>Toggle full-screen</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>O</kbd></td>
        <td>Toggle 2x2 over-sampling, aka screenshot-mode. Makes it look nicer, but also render much slower.</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>S</kbd></td>
        <td>
          Toggle between sRGB and Display-P3 color space.
          (Somehow the colors don't come out quite right either way, I don't know enough about that stuff.
          Choose what looks good to you.)
        </td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Ctrl</kbd>+<kbd>S</kbd></td>
        <td>Save a screenshot. The screenshot will be recorded in 2x2 over-sampling mode, i.e. it will be twice the size of your window.</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>I</kbd></td>
        <td>Increase iterations</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Shift</kbd>+<kbd>I</kbd></td>
        <td>Decrease iterations</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>T</kbd></td>
        <td>Increase threshold</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Shift</kbd>+<kbd>T</kbd></td>
        <td>Decrease threshold</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>C</kbd></td>
        <td>Cycle through color presets</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Shift</kbd>+<kbd>C</kbd></td>
        <td>Cycle through color presets backward</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>P</kbd></td>
        <td>Play animation</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Shift</kbd>+<kbd>P</kbd></td>
        <td>Play animation in reverse</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Esc</kbd></td>
        <td>Stop animation</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>A</kbd></td>
        <td>Add animation key-frame</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Shift</kbd>+<kbd>A</kbd></td>
        <td>Remove last animation key-frame</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>U</kbd></td>
        <td>Update position, complex parameter and zoom of last animation key-frame</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>D</kbd></td>
        <td>Increase duration of last key-frame by 1 second</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Alt</kbd>+<kbd>D</kbd></td>
        <td>Increase duration of last key-frame by 100 milliseconds</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Shift</kbd>+<kbd>D</kbd></td>
        <td>Decrease duration of last key-frame by 1 second</td>
      </tr>
      <tr>
        <td class="hotkey"><kbd>Shift</kbd>+<kbd>Alt</kbd>+<kbd>D</kbd></td>
        <td>Decrease duration of last key-frame by 100 milliseconds</td>
      </tr>
    </tbody>
  </table>
</div>
<script src="mandelbrot.js"></script>
</body>
</html>
